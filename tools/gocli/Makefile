# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼ˆãƒã‚¤ãƒŠãƒªåï¼‰
APP_NAME := gocli
APP_DIR := $(HOME)/dotfiles/tools/gocli
OUT_DIR := $(HOME)/dotfiles/tools/gocli/.out

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
.PHONY: all
all: build

# ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ“ãƒ«ãƒ‰
.PHONY: build
build:
	@echo "ğŸ”§ Building $(APP_NAME) for current OS..."
	cd $(APP_DIR) && go build -o $(OUT_DIR)/$(APP_NAME)

# å„OSç”¨ãƒ“ãƒ«ãƒ‰ï¼ˆLinux, macOS, Windowsï¼‰
.PHONY: build-all
build-all:
	@mkdir -p $(OUT_DIR)
	cd $(APP_DIR) && \
	echo "ğŸ§ Linux amd64" && GOOS=linux GOARCH=amd64 go build -o $(OUT_DIR)/$(APP_NAME)_linux_amd64 && \
	echo "ğŸ macOS arm64" && GOOS=darwin GOARCH=arm64 go build -o $(OUT_DIR)/$(APP_NAME)_macos_arm64 && \
	echo "ğŸªŸ Windows amd64" && GOOS=windows GOARCH=amd64 go build -o $(OUT_DIR)/$(APP_NAME)_windows_amd64.exe

# ã‚¯ãƒªãƒ¼ãƒ³
.PHONY: clean
clean:
	rm -rf $(OUT_DIR)/$(APP_NAME)*
